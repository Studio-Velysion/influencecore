## Docker stack (local/prod) — NE PAS COMMITER docker/.env
#
# 1) Copie ce fichier vers docker/.env (non versionné)
# 2) Lance la stack

# Ports (host)
# - Avec docker-compose.global.yml, Traefik expose tout sur 80.
INFLUENCECORE_PORT=3000
KEYCLOAK_PORT=8080
MARIADB_PORT=3306
POSTGRES_PORT=5432
HELPDESK_PORT=8000
HELPDESK_SOCKETIO_PORT=9000
FOSSBILLING_PORT=8081

MARIADB_ROOT_PASSWORD=change-me

# PostgreSQL (stack globale)
POSTGRES_USER=postgres
POSTGRES_PASSWORD=change-me
POSTGRES_DB=influencecore

KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=change-me

# IMPORTANT (sans domaine) :
# Utilise ce hostname "stable" pour que l’issuer OIDC soit identique depuis le navigateur ET depuis les containers.
# Sur Windows / Docker Desktop, host.docker.internal fonctionne.
NEXTAUTH_URL=http://host.docker.internal
NEXTAUTH_SECRET=change-me

# Issuer OIDC (utilisé par les services + callbacks navigateur)
KEYCLOAK_ISSUER=http://host.docker.internal/auth/realms/influencecore
KEYCLOAK_CLIENT_ID=influencecore-web
KEYCLOAK_CLIENT_SECRET=change-me

# Premier admin InfluenceCore (créé au premier démarrage si aucun admin n'existe)
INITIAL_ADMIN_EMAIL=admin@domaine.tld
INITIAL_ADMIN_PASSWORD=change-me
INITIAL_ADMIN_NAME=Administrateur
INITIAL_ADMIN_PSEUDO=admin

# Dashboards (iframe) — exposés via Traefik (même host)
NEXT_PUBLIC_HELPDESK_DASHBOARD_URL=http://host.docker.internal/helpdesk
NEXT_PUBLIC_FOSSBILLING_DASHBOARD_URL=http://host.docker.internal/billing
NEXT_PUBLIC_KEYCLOAK_ADMIN_URL=http://host.docker.internal/auth/admin/master/console/

# Postiz (UI + backend pour Messa)
NEXT_PUBLIC_POSTIZ_DASHBOARD_URL=http://host.docker.internal:4200
POSTIZ_BACKEND_URL=http://postiz:3000
INFLUENCECORE_INTERNAL_KEY=change-me

# Postiz (monorepo) — requis
POSTIZ_JWT_SECRET=change-me
POSTIZ_NOT_SECURED=true
POSTIZ_STORAGE_PROVIDER=cloudflare
# URLs publiques (derrière Traefik) — utilisées par le frontend et par le backend (cookies/liens)
POSTIZ_FRONTEND_URL=http://host.docker.internal/social
POSTIZ_BACKEND_PUBLIC_URL=http://host.docker.internal/social/api

# Helpdesk fork (UI + API) — SSO Keycloak
HELPDESK_PUBLIC_URL=http://host.docker.internal
HELPDESK_KEYCLOAK_CLIENT_ID=helpdesk-client
HELPDESK_KEYCLOAK_CLIENT_SECRET=change-me
HELPDESK_BRAND_NAME=Helpdesk

